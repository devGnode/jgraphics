<html>

<head>
    <title>CubiXe</title>
    <script src="./lib/requiJs.js"></script>
    <script src="./lib/glib/gui.js"></script>
    <script src="./main.js" type="module"></script>
</head>
<style>
    canvas.screen{border:1px solid #cecece; margin:auto;  cursor:none;background: url("https://i.ibb.co/k4tf1BZ/thumb-1920-941898.jpg"), no-repeat;background-size: 100% 100%;}
</style>
<body>
    <div style="text-align: center;">
        <canvas class="screen" id="media12" width="168" height="96" style="border:1px solid #ececec;"></canvas>
    </div>
</body>
<script>
    window.onload = function( ){


    class BorderLayout extends Layout{

            #offsetY= 0;
            #offsetX= 0;
            #greater=0;

            constructor( hgap = 0, vgap = 0, align = FlowLayout.CENTER ) {
                super(hgap,vgap,align);
            }

            add( alignment = 0,parent,child){
                super.add(parent,child);
                let wrap = new GraphicsElement(child.width,child.height);
                wrap.setBackground(0)
                    .setPadding(this.getHgap(),this.getVgap(),this.getHgap(),this.getVgap())
                    .append(child)
                    .setParent(parent)
                    .setY(this.#offsetY)
                    .setX(this.#offsetX);

                // add parent padding
                if( this.#offsetX+child.computedWidth  > parent.computedWidth ){
                    wrap.setX(this.#offsetX = 0).setY(this.#offsetY += this.#greater);
                    this.#greater = 0;
                }
                if(child.computedHeight+(this.getVgap()*2)>this.#greater)this.#greater = child.computedHeight+(this.getVgap()*2);
                this.#offsetX+= child.computedWidth+(this.getHgap()*2);
                //parent.pack();
                if(this.getAlign() ===BoxLayout.LEADING)child.pack();

                return wrap;
            }

    }

    class Pane extends GraphicsElement{

        #layout = new BoxLayout();

        constructor( ) {
            super(1,1);
            this.setBackground(0);
        }

        setLayout( layout = null ){
            if(!(layout instanceof  Layout)) throw new Error("Bad cast : "+(layout.constructor.name)+" : to Layout Object");
            this.#layout = layout;
            return this;
        }

        add( graphicsElement ){return super.add(this.#layout.add(this,graphicsElement));}
    }

    class Button extends GraphicsElement{

        constructor( value = "Ok", width = 65 ) {
            super(width,25);
            this.setBackground(0x00bfff);
            this.setPadding(0,5);
            let pane = new Pane();
            pane.setLayout(new BoxLayout(0,0,BoxLayout.CENTER))
            pane.resize(width,25);

            this.setBorder(1,1,1,1,0x6f6f6f);
            this.append(pane.add(new GText(value,0xffffff)));
        }

    }

        class Input extends GraphicsElement{

            #gtext;

            constructor( value = "Ok", width = 100 ) {
                super(width,20);
                this.setBackground(0xffffff);
                this.setPadding(5,5);
                let pane = new Pane();
                pane.setLayout(new BoxLayout(0,0,BoxLayout.LEFT))
                pane.resize(width,25);

                this.setBorder(1,1,1,1,0x00bfff);
                this.#gtext = new GText(value,0x000001);

                this.append(pane.add( this.#gtext ));
            }
        }


    class EventsElement{

        constructor() {
        }

    }

    class GWindow{

        constructor() {
        }

        //0xcd5c5c
        render(){
            let window = new GraphicsElement(450,20);
            window.resize(450,150)
                .setBackground(0xc0c0c0)
                .setBorder(0,1,0,1,0x729c9b)
                .setPadding(0,0,0,2);

            let t = new Pane()
                .setLayout(new BoxLayout(0,0,BoxLayout.CENTER))
                .resize(450,150)
                .setBackground(0);

           let header = new Pane(),
                body = new Pane();

           header.resize(450,25)
               .setBackground(0xe0e0e0)
               .setBorder(0,0,0,1,0x00bfff)
               .setLayout(new BoxLayout(0,0,BoxLayout.LEFT))
               .add(new GraphicsElement(450,25).setBackground(0).setPadding(10,5).add(new GText("Message Box : CubiX centOs")));
           body.resize(450,125)
                .setBackground(0xffffff);

           t.add(header).add(body);

            window.add(t);
            //window.pack();

            return window;
        }
    }


    let m12 = new GraphicalUserInterface({
        monitor: document.getElementById("media12"),
        width:800,
        height:600
    });
    let frameB12 = FrameBuffer.builder(null,{x:800,y:600}).resetScreen(0x0000ff);
    //frameB12.templateDraw().rect(10,10,350,100,0xffffff);
    let mouse = {d:[0xe9,0xe9,0xe9,0x5c,0xfc,0xfc,0xfc,0xee,0xf2,0xf2,0xf2,0x87,0x59,0x59,0x59,0x14,0x00,0x00,0x00,0x0b,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf3,0xf3,0xf3,0x94,0xb9,0xb9,0xb9,0xff,0xd0,0xd0,0xd0,0xfe,0xf4,0xf4,0xf4,0xa7,0x64,0x64,0x64,0x1c,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0xf0,0xf0,0x96,0xa1,0xa1,0xa1,0xff,0x29,0x29,0x29,0xff,0xba,0xba,0xba,0xff,0xf6,0xf6,0xf6,0xc2,0x8c,0x8c,0x8c,0x28,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xee,0xee,0xee,0x97,0xa0,0xa0,0xa0,0xff,0x1a,0x1a,0x1a,0xff,0x21,0x21,0x21,0xff,0x9f,0x9f,0x9f,0xff,0xf8,0xf8,0xf8,0xd7,0xae,0xae,0xae,0x39,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x0b,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xec,0xec,0xec,0x97,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1e,0x1e,0x1e,0xff,0x87,0x87,0x87,0xff,0xfb,0xfb,0xfb,0xe5,0xbe,0xbe,0xbe,0x47,0x00,0x00,0x00,0x11,0x00,0x00,0x00,0x0b,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0xed,0xed,0xed,0x98,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x6a,0x6a,0x6a,0xff,0xf0,0xf0,0xf0,0xf6,0xd8,0xd8,0xd8,0x63,0x0e,0x0e,0x0e,0x12,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x01,0xed,0xed,0xed,0x98,0xa0,0xa0,0xa0,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x56,0x56,0x56,0xff,0xea,0xea,0xea,0xf8,0xe4,0xe4,0xe4,0x7d,0x0d,0x0d,0x0d,0x13,0x00,0x00,0x00,0x0d,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x03,0xec,0xec,0xec,0x97,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x41,0x41,0x41,0xff,0xdc,0xdc,0xdc,0xfc,0xec,0xec,0xec,0x97,0x3d,0x3d,0x3d,0x19,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x05,0xed,0xed,0xed,0x98,0xa0,0xa0,0xa0,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x32,0x32,0x32,0xff,0xc9,0xc9,0xc9,0xff,0xf3,0xf3,0xf3,0xaf,0x71,0x71,0x71,0x22,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x09,0xed,0xed,0xed,0x98,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x29,0x29,0x29,0xff,0xb8,0xb8,0xb8,0xff,0xf7,0xf7,0xf7,0xc5,0x89,0x89,0x89,0x27,0x00,0x00,0x00,0x0d,0xed,0xed,0xed,0x98,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1d,0x1d,0x1d,0xff,0x9a,0x9a,0x9a,0xff,0xf8,0xf8,0xf8,0xdd,0xc0,0xc0,0xc0,0x39,0xed,0xed,0xed,0x98,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1c,0x1c,0x1c,0xff,0x83,0x83,0x83,0xff,0xfc,0xfc,0xfc,0xe6,0xec,0xec,0xec,0x97,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x26,0x26,0x26,0xff,0x68,0x68,0x68,0xff,0xc7,0xc7,0xc7,0xf8,0xfb,0xfb,0xfb,0xcd,0xec,0xec,0xec,0x97,0xa0,0xa0,0xa0,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x29,0x29,0x29,0xff,0x8c,0x8c,0x8c,0xff,0xd8,0xd8,0xd8,0xe5,0xed,0xed,0xed,0x9f,0xc6,0xc6,0xc6,0x48,0x20,0x20,0x20,0x10,0xf0,0xf0,0xf0,0x96,0xa1,0xa1,0xa1,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0x3e,0x3e,0x3e,0xff,0xfd,0xfd,0xfd,0xf1,0x75,0x75,0x75,0x32,0x00,0x00,0x00,0x17,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x0b,0xf1,0xf1,0xf1,0x95,0xa3,0xa3,0xa3,0xff,0x2f,0x2f,0x2f,0xff,0x4e,0x4e,0x4e,0xff,0x85,0x85,0x85,0xff,0xbc,0xbc,0xbc,0xf7,0xa2,0xa2,0xa2,0xff,0x1d,0x1d,0x1d,0xff,0x1a,0x1a,0x1a,0xff,0x1b,0x1b,0x1b,0xff,0xef,0xef,0xef,0xff,0x9b,0x9b,0x9b,0x38,0x00,0x00,0x00,0x13,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x07,0xed,0xed,0xed,0x72,0xeb,0xeb,0xeb,0xff,0xe1,0xe1,0xe1,0xe7,0xf4,0xf4,0xf4,0xb3,0xdd,0xdd,0xdd,0x78,0xac,0xac,0xac,0x4a,0xf5,0xf5,0xf5,0xce,0x7f,0x7f,0x7f,0xff,0x1a,0x1a,0x1a,0xff,0x1a,0x1a,0x1a,0xff,0xc1,0xc1,0xc1,0xff,0xda,0xda,0xda,0x68,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x0a,0x00,0x00,0x00,0x06,0x5b,0x5b,0x5b,0x0e,0xc9,0xc9,0xc9,0x2f,0x84,0x84,0x84,0x1d,0x1b,0x1b,0x1b,0x13,0x00,0x00,0x00,0x13,0x00,0x00,0x00,0x16,0x97,0x97,0x97,0x36,0xf6,0xf6,0xf6,0xe9,0x5c,0x5c,0x5c,0xff,0x1a,0x1a,0x1a,0xff,0x8f,0x8f,0x8f,0xff,0xf0,0xf0,0xf0,0x9b,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x0b,0x00,0x00,0x00,0x0e,0x00,0x00,0x00,0x11,0xd1,0xd1,0xd1,0x54,0xeb,0xeb,0xeb,0xf8,0x48,0x48,0x48,0xff,0x88,0x88,0x88,0xff,0xfa,0xfa,0xfa,0xc5,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x0b,0x00,0x00,0x00,0x0e,0xef,0xef,0xef,0x7d,0xf0,0xf0,0xf0,0xfa,0xf4,0xf4,0xf4,0xc2,0xe1,0xe1,0xe1,0x4c,0x00,0x00,0x00,0x09,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x03]};
    let fmouse = FrameBuffer.builder(mouse.d,{x:15,y:20});

    let rtt = null;
    function ww(a,b,e,f) {
        let w = FrameBuffer.builder();
        w.resize(350, 120)
        w.resetScreen(0x010101);
        w.templateDraw().rect(0, 1, 350, 150, 0xf0f0f0);

        rtt= w;
        let h = new GraphicsElement(350,20);
        h.setBackground(0x4a4842)
        h.setPadding(5,5)
            //.setLine(0,0x729c9b);
        h.append(new GText("MessageBox",0xffffff))
        let bd = new GraphicsElement(348,130);
        bd.setBackground(0xf0f0f0);
        let msgPane = new Pane();
        msgPane.resize(bd.width,bd.height);
        msgPane.setLayout(new BoxLayout());
        msgPane.add(new GraphicsElement(348,50).setBackground(0).setMargin(10,10).append(new GText("Hellow world ! welcome to Cubix bien canvas developement into a canvas").setWrap(GText.PRE_WRAP)));
        msgPane.add(new Button("OK"));
        msgPane.pack()
        bd.pack()
        //bd.append(new GText("Voici une messageBox avec beaucoup de text deans maias bo voic").setWrap(GText.PRE_WRAP));
        //bd.append(new Button("OK"))
        bd.append(msgPane);
        //frameB12.append(a||10, b||10,w);
        //frameB12.tiles().setOffsetX(350).setOffsetY(100).setTile(a||10, b||10, w.getUin32FrameBuffer());
        let ef = new GraphicsElement(200,300),
            kk = new GraphicsElement(200,50),
            vv = new GraphicsElement(200,75);

            kk.setBackground(0x55ff55);
            kk.setPosition(0,0);
            kk.setPadding(5,5);
            kk.setMargin(5,5,5,5);
            kk.setBorder();

            vv.setBackground(0xff0000);
            vv.setPosition(0,0);
            vv.setMargin(0,10);
            vv.setPadding(5,10);
            vv.setBorder();

            ef.setBackground(0xff00ff);
            ef.setPosition(100,100);
            ef.setBorder()
            //ef.setPadding(10,5);
            let Gtext = new GText("HELLO WORLD ! comment ca va ? bien est toi ",0xff0000);

            Gtext.setWrap(GText.PRE_WRAP);
             kk.append(Gtext);
             ef.append(kk);
             ef.append(vv.append(new GText("nonje vais bien mais cela pourrait ! lol mais aussi tu peux pas faire ça").setFontFamily(GText.CP437_9_16).setWrap(GText.PRE_WRAP)));
    ef.pack();

        let efg = new GraphicsElement(400,300);
            efg.setBackground(0x55ff00);
         let pan = new Pane();
         pan.resize(400,300);
         pan.setLayout(new FlowLayout(1,1,BoxLayout.LEFT));
        pan.add(new GraphicsElement(50,50).setBackground(0xaa00ff));
        pan.add(new GraphicsElement(50,100).setBackground(0x555555));
        pan.add(new GraphicsElement(50,100).setBackground(0x555555));
        pan.add(new GraphicsElement(50,100).setBackground(0x555555));
        pan.add(new GraphicsElement(50,50).setBackground(0x0000ff));
        pan.add(new GraphicsElement(50,50).setBackground(0x0000ff));
        pan.add(new GraphicsElement(80,50).setBackground(0x0000ff));
      //  pan.add(new GraphicsElement(200,50).setBackground(0x0000ff));
       // pan.add(new GText("Salut comment uiqoezea"))
        let yui = new Pane(0,0);
        yui.setLayout(new BoxLayout(0,0,BoxLayout.CENTER))
        yui.resize(400,50);
        yui.add(new GraphicsElement(200,50).setPadding(5,5).setBackground(0x555555).append(new Input("\x07\x07\x07\x07\x07\x07",150)));
        pan.add(yui);
        //pan.pack();
        //pan.add(new GraphicsElement(400,100));
        //console.log("---",pan)
        efg.append(pan);

        m12.refresh(
            frameB12
                .append(50||10, 5||10,w.append(0,1,h.render().getFrameBuffer(),0).append(1,20,bd.render().getFrameBuffer(),0),0)
                .append(ef.x,ef.y,ef.render().getFrameBuffer(),0)
                .append(350,150,efg.render().getFrameBuffer(),0)
                .append(a-50||10, b-5||10,new GWindow().render().render().getFrameBuffer(),0)
                .append(e,f+10,fmouse,0)
        );
    }
    ww();
        document.getElementById("media12").onclick =function(){
            console.log(rtt)
        };
    document.getElementById("media12").onmousemove = function( e ) {

        frameB12 = FrameBuffer.builder(null,{x:800,y:600}) //.resetScreen(0x0000ff);
        frameB12.templateDraw()/*.grid(0xf0f0f0,50,true,true)*/
        ww(e.offsetX,e.offsetY,e.offsetX,e.offsetY);
    };
    };
</script>
</html>
